import{s as D,r as R,j as U,d as z,k as Y,c as w,o as d,b as f,w as a,u as l,e as B,n as G,l as M,m as K,p as Q,h as e,i as N,T as W,q as X,a as Z,f as k,F as ee,g as o,t as c}from"./index-15c7c175.js";import{E as te,c as ae,_ as oe,d as ne,a as se,b as le,e as re}from"./YamlDisplay.vue_vue_type_script_setup_true_lang-bc84f091.js";import{E as ie}from"./el-button-aa579aaa.js";import{E as ce,a as me}from"./el-menu-item-edc0660f.js";import{E as ue}from"./el-divider-4d5c4406.js";/* empty css                */import{u as de,E as O,c as pe,i as _e,a as ve,n as fe,d as he,l as be,s as ye,e as ge,b as ke}from"./index-7ce18fc0.js";import{u as we,s as A}from"./project-78552745.js";import{_ as Ne}from"./MarkdownContent.vue_vue_type_script_setup_true_lang-bfa37a62.js";import{_ as xe}from"./ContentWithLeftSidebar.vue_vue_type_script_setup_true_lang-29bffb5f.js";import{u as Ee,t as Se}from"./index-c5cf7585.js";import{_ as Te}from"./plugin-vue_export-helper-1cff8a04.js";import"./zipObject-5ba28c7b.js";import"./index-a24752f3.js";import"./stringify-ec884b6d.js";import"./clone-5efd7704.js";import"./isUndefined-aa0326a0.js";import"./advancedFormat-c5811322.js";import"./index-9b6e9674.js";const Ie={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},Ce={click:p=>p instanceof MouseEvent},Ve=(p,h,b)=>{const t=D(),_=D(),y=R(!1),x=()=>{t.value&&(y.value=t.value.scrollTop>=p.visibilityHeight)},E=v=>{var r;(r=t.value)==null||r.scrollTo({top:0,behavior:"smooth"}),h("click",v)},S=de(x,300,!0);return Ee(_,"scroll",S),U(()=>{var v;_.value=document,t.value=document.documentElement,p.target&&(t.value=(v=document.querySelector(p.target))!=null?v:void 0,t.value||Se(b,`target does not exist: ${p.target}`),_.value=t.value)}),{visible:y,handleClick:E}},j="ElBacktop",$e=z({name:j}),Ae=z({...$e,props:Ie,emits:Ce,setup(p,{emit:h}){const b=p,t=Y("backtop"),{handleClick:_,visible:y}=Ve(b,h,j),x=w(()=>({right:`${b.right}px`,bottom:`${b.bottom}px`}));return(E,S)=>(d(),f(W,{name:`${l(t).namespace.value}-fade-in`},{default:a(()=>[l(y)?(d(),B("div",{key:0,style:G(l(x)),class:M(l(t).b()),onClick:S[0]||(S[0]=K((...v)=>l(_)&&l(_)(...v),["stop"]))},[Q(E.$slots,"default",{},()=>[e(l(O),{class:M(l(t).e("icon"))},{default:a(()=>[e(l(pe))]),_:1},8,["class"])])],6)):N("v-if",!0)]),_:3},8,["name"]))}});var Be=Te(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const ze=X(Be);const Pe={style:{position:"fixed","margin-top":"50px"}},De={style:{"text-align":"left",color:"var(--command-color)","font-size":"1.2rem","margin-left":"var(--default-space)","margin-top":"var(--default-space)","margin-bottom":"var(--default-space)"}},Me=o("strong",null,"Service Information",-1),Re=o("strong",null,"Commands",-1),Oe=o("strong",null,"Subscriptions",-1),je=o("strong",null,"Events",-1),Fe=o("strong",null,"REST-API",-1),Le=o("strong",null,"Service Dependencies",-1),qe=o("strong",null,"Custom Configuration",-1),He=o("strong",null,"Services",-1),Je=o("div",{id:"general",class:"anchor"},null,-1),Ue={style:{"margin-right":"5px"}},Ye={style:{color:"var(--el-text-color-secondary)"}},Ge={style:{color:"var(--el-text-color-secondary)","margin-top":"5px"}},Ke=o("div",{id:"commands",class:"anchor"},null,-1),Qe=o("h2",null,"Commands",-1),We=o("div",{id:"subscriptions",class:"anchor"},null,-1),Xe=o("h2",null,"Subscriptions",-1),Ze=o("div",{id:"events",class:"anchor"},null,-1),et=o("h2",null,"Events",-1),tt=o("div",{id:"rest-api",class:"anchor"},null,-1),at=o("h2",null,"REST-API endpoints",-1),ot=o("div",{id:"dependencies",class:"anchor"},null,-1),nt=o("h2",null,"Dependencies",-1),st=o("p",null,"SOON ðŸ¤«",-1),lt=o("div",{id:"configuration",class:"anchor"},null,-1),rt=o("h2",null,"Custom Configuration",-1),it={key:2},It=z({__name:"ServiceInfo",props:{serviceName:{},serviceVersion:{},projectId:{}},setup(p){const h=p,b=we(),t=w(()=>b.getServiceByNameAndVersion(h.serviceName,h.serviceVersion)),_=w(()=>{var r;return(r=t.value)==null?void 0:r.markdown}),y=w(()=>t.value?A(t.value.commands).by({asc:r=>r.name,comparer:new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare}):[]),x=w(()=>t.value?A(t.value.subscriptions).by({asc:r=>r.name,comparer:new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare}):[]),E=w(()=>{if(!t.value)return[];const r=[],m=[];return t.value.commands.forEach(s=>{if(!s.eventName||!t.value)return;const i={name:s.eventName,producer:{name:s.name,kind:"command"}};m.push(i)}),t.value.subscriptions.forEach(s=>{if(!s.eventName||!t.value)return;const i={name:s.name,kind:"subscription"},T={name:s.eventName,producer:i};if(m.push(T),s.subscribesTo.eventname){const g={name:s.subscribesTo.eventname,producer:i};r.push(g)}}),[...m.map(s=>({...s,kind:"publishes"})),...r.map(s=>({...s,kind:"consumes"}))]}),S=w(()=>{if(!t.value)return[];const r=t.value.commands.filter(m=>!!m.restApi).map(m=>{var s,i,T;return{commandName:m.name,method:(s=m.restApi)==null?void 0:s.method,path:`v${(i=t.value)==null?void 0:i.version}/${(T=m.restApi)==null?void 0:T.path}`.replace("//","/")}});return A(r).by({asc:m=>m.path,comparer:new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare})}),v=R("tsTypes");return(r,m)=>{const s=O,i=ce,T=me,g=ie,I=ue,C=Z("RouterLink"),u=te,V=ae,F=oe,$=ne,L=se,q=le,H=re,J=ze;return t.value?(d(),f(xe,{key:0},{sidebar:a(()=>[o("div",Pe,[o("div",De,[o("strong",null,c(t.value.name),1)]),e(T,{style:{"border-right":"none !important",width:"240px","--el-menu-bg-color":"none"},router:!0},{default:a(()=>[e(i,{index:"#general"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(_e))]),_:1}),Me]),_:1}),e(i,{index:"#commands"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(ve))]),_:1}),Re,o("small",null,"Â ("+c(y.value.length)+")",1)]),_:1}),e(i,{index:"#subscriptions"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(fe))]),_:1}),Oe,o("small",null,"Â ("+c(x.value.length)+")",1)]),_:1}),e(i,{index:"#events"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(he))]),_:1}),je,o("small",null,"Â ("+c(E.value.length)+")",1)]),_:1}),e(i,{index:"#rest-api"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(be))]),_:1}),Fe]),_:1}),e(i,{index:"#dependencies"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(ye))]),_:1}),Le]),_:1}),e(i,{index:"#configuration"},{title:a(()=>[e(s,null,{default:a(()=>[e(l(ge))]),_:1}),qe]),_:1}),e(i,{index:"#schema",style:{"margin-top":"60px"},route:{name:"services",params:{projectId:r.projectId}}},{title:a(()=>[e(s,null,{default:a(()=>[e(l(ke))]),_:1}),He]),_:1},8,["route"])]),_:1})])]),content:a(()=>{var P;return[Je,o("div",null,[o("h2",Ue,[k(" Service "+c(h.serviceName)+" ",1),o("small",Ye,"(v"+c(h.serviceVersion)+")",1),t.value.deprecated?(d(),f(g,{key:0,effect:"dark",type:"danger",size:"large",style:{"margin-left":"var(--default-space)"}},{default:a(()=>[k("deprecated")]),_:1})):N("",!0)])]),o("div",Ge,c(((P=t.value)==null?void 0:P.description)||""),1),e(I),_.value?(d(),f(Ne,{key:0,markdown:_.value},null,8,["markdown"])):N("",!0),Ke,Qe,e(V,{data:y.value,style:{width:"100%"},"empty-text":"Service "+t.value.name+" has no commands",stripe:"","default-sort":{prop:"name",order:"descending"},border:""},{default:a(()=>[e(u,{prop:"name",label:"Name",sortable:""},{default:a(n=>[e(C,{to:{name:"commandInfo",params:{serviceName:t.value.name,serviceVersion:t.value.version,commandName:n.row.name}},style:{"text-decoration":"none",display:"block"}},{default:a(()=>[o("strong",null,c(n.row.name),1)]),_:2},1032,["to"])]),_:1}),e(u,{prop:"eventName",label:"Emits",width:"300",sortable:""},{default:a(n=>[n.row.eventName?(d(),f(g,{key:0,size:"large",type:"success",effect:"dark"},{default:a(()=>[k(c(n.row.eventName),1)]),_:2},1024)):N("",!0)]),_:1})]),_:1},8,["data","empty-text"]),e(I),We,Xe,e(V,{data:x.value,style:{width:"100%"},"empty-text":"Service "+t.value.name+" has no subscriptions",stripe:"","default-sort":{prop:"name",order:"descending"},border:""},{default:a(()=>[e(u,{prop:"name",label:"Name",sortable:""},{default:a(n=>[e(C,{to:{name:"subscriptionInfo",params:{serviceName:t.value.name,serviceVersion:t.value.version,subscriptionName:n.row.name}},style:{"text-decoration":"none",display:"block"}},{default:a(()=>[o("strong",null,c(n.row.name),1)]),_:2},1032,["to"])]),_:1}),e(u,{prop:"subscribesTo.eventName",label:"Subscribes",width:"300",sortable:""},{default:a(n=>[n.row.subscribesTo.eventName?(d(),f(g,{key:0,size:"large",type:"success",effect:"dark"},{default:a(()=>[k(c(n.row.subscribesTo.eventName),1)]),_:2},1024)):N("",!0)]),_:1}),e(u,{prop:"eventName",label:"Emits",width:"300",sortable:""},{default:a(n=>[n.row.eventName?(d(),f(g,{key:0,size:"large",type:"success",effect:"dark"},{default:a(()=>[k(c(n.row.eventName),1)]),_:2},1024)):N("",!0)]),_:1})]),_:1},8,["data","empty-text"]),e(I),Ze,et,e(V,{data:E.value,style:{width:"100%"},"empty-text":"Service "+t.value.name+" has no events",stripe:"","default-sort":{prop:"name",order:"descending"},border:""},{default:a(()=>[e(u,{prop:"kind",sortable:"",width:"120"}),e(u,{prop:"name",width:"300",sortable:""},{default:a(n=>[n.row.name?(d(),f(g,{key:0,size:"large",type:n.row.kind==="publishes"?"success":"",effect:"dark"},{default:a(()=>[k(c(n.row.name),1)]),_:2},1032,["type"])):N("",!0)]),_:1}),e(u,{prop:"producer.kind",sortable:"",width:"140"}),e(u,{prop:"producer.name",sortable:""},{default:a(n=>[e(C,{to:n.row.producer.kind==="subscription"?{name:"subscriptionInfo",params:{serviceName:t.value.name,serviceVersion:t.value.version,subscriptionName:n.row.producer.name}}:{name:"commandInfo",params:{serviceName:t.value.name,serviceVersion:t.value.version,commandName:n.row.producer.name}},style:{"text-decoration":"none",display:"block"}},{default:a(()=>[o("strong",null,c(n.row.producer.name),1)]),_:2},1032,["to"])]),_:1})]),_:1},8,["data","empty-text"]),e(I),tt,at,e(V,{data:S.value,style:{width:"100%"},"empty-text":"Service "+t.value.name+" has no REST-API endpoints",stripe:"","default-sort":{prop:"path",order:"descending"},border:""},{default:a(()=>[e(u,{prop:"method",label:"Name",width:"120",sortable:""}),e(u,{prop:"path",label:"Path",sortable:""}),e(u,{prop:"commandName",label:"Invokes",width:"300",sortable:""},{default:a(n=>[e(C,{to:{name:"commandInfo",params:{serviceName:t.value.name,serviceVersion:t.value.version,commandName:n.row.commandName}},style:{"text-decoration":"none",display:"block"}},{default:a(()=>[o("strong",null,c(n.row.commandName),1)]),_:2},1032,["to"])]),_:1})]),_:1},8,["data","empty-text"]),e(I),ot,nt,st,e(I),lt,rt,t.value.configSchema?(d(),f(H,{key:1,modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=n=>v.value=n)},{default:a(()=>[e($,{label:"Typescript",name:"tsTypes"},{default:a(()=>[e(F,{schema:t.value.configSchema},null,8,["schema"])]),_:1}),e($,{label:"OpenAPI-Schema",name:"openApiSchema"},{default:a(()=>[e(L,{schema:t.value.configSchema},null,8,["schema"])]),_:1}),e($,{label:"Example-Json",name:"example"},{default:a(()=>[e(q,{schema:t.value.configSchema},null,8,["schema"])]),_:1})]),_:1},8,["modelValue"])):(d(),B("p",it,"This service has not custom configuration.")),e(J,{right:100,bottom:100})]}),_:1})):(d(),B(ee,{key:1},[k(" Service not found ")],64))}}});export{It as default};
